"use strict";(self.webpackChunksrcful_documentation=self.webpackChunksrcful_documentation||[]).push([[890],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),y=i,g=c["".concat(s,".").concat(y)]||c[y]||u[y]||a;return n?r.createElement(g,o(o({ref:t},d),{},{components:n})):r.createElement(g,o({ref:t},d))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=y;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"},8037:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(7462),i=(n(7294),n(3905));const a={sidebar_position:1,slug:"/developer/hardware",pagination_prev:null},o="Overview",l={unversionedId:"developer/hardware",id:"developer/hardware",title:"Overview",description:"This document describes basic requirements for a device to be compatible with the Sourceful Energy Network (SEN). Document is under development.",source:"@site/docs/developer/hardware.md",sourceDirName:"developer",slug:"/developer/hardware",permalink:"/developer/hardware",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/developer/hardware",pagination_prev:null},sidebar:"tutorialSidebar",next:{title:"Design manual and press",permalink:"/developer/design-manual"}},s={},p=[{value:"Basics",id:"basics",level:2},{value:"Overview",id:"overview-1",level:2},{value:"Core Specifications",id:"core-specifications",level:2},{value:"Software Implementation",id:"software-implementation",level:2},{value:"Python Example",id:"python-example",level:3},{value:"header",id:"header",level:2},{value:"energy meter header example",id:"energy-meter-header-example",level:3},{value:"payload",id:"payload",level:2},{value:"energy meter payload example",id:"energy-meter-payload-example",level:3},{value:"signature",id:"signature",level:2},{value:"Full signed jwt energy meter example",id:"full-signed-jwt-energy-meter-example",level:3}],d={toc:p},c="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"overview"},"Overview"),(0,i.kt)("p",null,"This document describes basic requirements for a device to be compatible with the Sourceful Energy Network (SEN). Document is under development."),(0,i.kt)("h2",{id:"basics"},"Basics"),(0,i.kt)("p",null,"A device needs to be identifiable and provide a public key. Device id and public key needs to be registered with SEN before the device is usable. Internally a device needs to maintain the private key connected to the shared public key and sign data using it."),(0,i.kt)("p",null,"All hardware devices will need to be audited and tested before a granted access to the network and public release."),(0,i.kt)("h1",{id:"cryptographic-implementation-guide"},"Cryptographic Implementation Guide"),(0,i.kt)("h2",{id:"overview-1"},"Overview"),(0,i.kt)("p",null,"Our system uses ECDSA (Elliptic Curve Digital Signature Algorithm) for cryptographic operations, implemented in two ways:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Hardware-based using ATECC608A/B secure elements"),(0,i.kt)("li",{parentName:"ol"},"Software-based e.g. using Python's ",(0,i.kt)("inlineCode",{parentName:"li"},"ecdsa")," library")),(0,i.kt)("h2",{id:"core-specifications"},"Core Specifications"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Algorithm"),": ECDSA"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Curve"),": SECP256k1 "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Key Sizes"),": ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Private Key: 32 bytes (256 bits)"),(0,i.kt)("li",{parentName:"ul"},"Public Key: 64 bytes (x,y coordinates, 32 bytes each)")))),(0,i.kt)("h2",{id:"software-implementation"},"Software Implementation"),(0,i.kt)("p",null,"If a software keys are used it is imperative that the private key is stored in a secure way. The private key must not be stored in plain text in files, code nor as environment variables."),(0,i.kt)("h3",{id:"python-example"},"Python Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'# Example of ECDSA key generation and usage with Python\'s ecdsa library\nfrom ecdsa import SigningKey, VerifyingKey, SECP256k1\n\n# Generate a new private key (32 bytes)\nsk = SigningKey.generate(curve=SECP256k1)\nprint(f"Private key: {sk.to_string().hex()}")\n\n# Get the corresponding public key (64 bytes: x,y coordinates)\nvk = sk.get_verifying_key()\nprint(f"Public key: {vk.to_string().hex()}")\n\n# Sign a message\nmessage = b"Hello, World!"\nsignature = sk.sign(message)\nprint(f"Signature: {signature.hex()}")\n\n# Verify the signature\ntry:\n    is_valid = vk.verify(signature, message)\n    print("Signature verified successfully")\nexcept:\n    print("Signature verification failed")\n\n# Example of loading an existing private key (if needed)\n# private_key_hex = "your_private_key_hex_here"\n# sk = SigningKey.from_string(bytes.fromhex(private_key_hex), curve=SECP256k1)\n\n# Example of loading an existing public key (if needed)\n# public_key_hex = "your_public_key_hex_here"\n# vk = VerifyingKey.from_string(bytes.fromhex(public_key_hex), curve=SECP256k1)\n')),(0,i.kt)("h1",{id:"data-ingress"},"Data Ingress"),(0,i.kt)("p",null,"Devices send data to the network using a signed JSON Web token (jwt) format. You can read more about the format specification here: ",(0,i.kt)("a",{parentName:"p",href:"https://jwt.io/introduction"},"https://jwt.io/introduction")),(0,i.kt)("p",null,"In particular data ingested using signed JWTs (not encrypted) via https. I.e. standard safe https transport is used to perform end to end encryption of the data."),(0,i.kt)("h2",{id:"header"},"header"),(0,i.kt)("p",null,"The header consists of the standard fields plus extra protocol specific fields."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "alg": "ES256",    \n    "typ": "JWT",\n    "device": "device_id",\n    "opr": "testing"\n    "licence": "device licence key"\n    "developer": "developer licence key"\n    "model": "model string"\n    "dtype": "payload datatype specifics",\n    "sn": "data serial number"\n    \n}\n')),(0,i.kt)("h3",{id:"energy-meter-header-example"},"energy meter header example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "alg": "ES256",\n  "typ": "JWT",\n  "device": "0123752ceb741f6eee",\n  "opr": "production",\n  "model": "p1homewizard",\n  "dtype": "p1_telnet_json",\n  "sn": "LGF5E360"\n}\n')),(0,i.kt)("p",null,"One note is that technically the ",(0,i.kt)("inlineCode",{parentName:"p"},"ES256K")," algorithim is used. that is ECDSA using SECP256k1 curve and SHA-256 and not ECDSA using P-256 curve and SHA-256"),(0,i.kt)("h2",{id:"payload"},"payload"),(0,i.kt)("p",null,"The body consists of the data the device sends, this data consists of one or more timestamped json objects. This is not generally standardized at this point. Timestamps are always in UTC."),(0,i.kt)("h3",{id:"energy-meter-payload-example"},"energy meter payload example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "1739352916813": {\n    "serial_number": "LGF5E360",\n    "rows": [\n      "0-0:1.0.0(250212103510W)",\n      "1-0:1.8.0(00010968.132*kWh)",\n      "1-0:2.8.0(00000000.000*kWh)",\n      "1-0:3.8.0(00000005.151*kVArh)",\n      "1-0:4.8.0(00002109.781*kVArh)",\n      "1-0:1.7.0(0000.253*kW)",\n      "1-0:2.7.0(0000.000*kW)",\n      "1-0:3.7.0(0000.000*kVAr)",\n      "1-0:4.7.0(0000.084*kVAr)",\n      "1-0:21.7.0(0000.064*kW)",\n      "1-0:22.7.0(0000.000*kW)",\n      "1-0:41.7.0(0000.161*kW)",\n      "1-0:42.7.0(0000.000*kW)",\n      "1-0:61.7.0(0000.028*kW)",\n      "1-0:62.7.0(0000.000*kW)",\n      "1-0:23.7.0(0000.000*kVAr)",\n      "1-0:24.7.0(0000.000*kVAr)",\n      "1-0:43.7.0(0000.000*kVAr)",\n      "1-0:44.7.0(0000.052*kVAr)",\n      "1-0:63.7.0(0000.000*kVAr)",\n      "1-0:64.7.0(0000.032*kVAr)",\n      "1-0:32.7.0(233.6*V)",\n      "1-0:52.7.0(233.0*V)",\n      "1-0:72.7.0(232.9*V)",\n      "1-0:31.7.0(000.2*A)",\n      "1-0:51.7.0(000.7*A)",\n      "1-0:71.7.0(000.1*A)",\n      "!0E78"\n    ],\n    "checksum": "0E78"\n  }\n}\n')),(0,i.kt)("h2",{id:"signature"},"signature"),(0,i.kt)("p",null,"The signature is the signature generated by the device private key that can be verified by the public key."),(0,i.kt)("h3",{id:"full-signed-jwt-energy-meter-example"},"Full signed jwt energy meter example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"eyJhbGciOiAiRVMyNTYiLCAidHlwIjogIkpXVCIsICJkZXZpY2UiOiAiMDEyMzc1MmNlYjc0MWY2ZWVlIiwgIm9wciI6ICJwcm9kdWN0aW9uIiwgIm1vZGVsIjogInAxaG9tZXdpemFyZCIsICJkdHlwZSI6ICJwMV90ZWxuZXRfanNvbiIsICJzbiI6ICJMR0Y1RTM2MCJ9.eyIxNzM5MzUyOTE2ODEzIjogeyJzZXJpYWxfbnVtYmVyIjogIkxHRjVFMzYwIiwgInJvd3MiOiBbIjAtMDoxLjAuMCgyNTAyMTIxMDM1MTBXKSIsICIxLTA6MS44LjAoMDAwMTA5NjguMTMyKmtXaCkiLCAiMS0wOjIuOC4wKDAwMDAwMDAwLjAwMCprV2gpIiwgIjEtMDozLjguMCgwMDAwMDAwNS4xNTEqa1ZBcmgpIiwgIjEtMDo0LjguMCgwMDAwMjEwOS43ODEqa1ZBcmgpIiwgIjEtMDoxLjcuMCgwMDAwLjI1MyprVykiLCAiMS0wOjIuNy4wKDAwMDAuMDAwKmtXKSIsICIxLTA6My43LjAoMDAwMC4wMDAqa1ZBcikiLCAiMS0wOjQuNy4wKDAwMDAuMDg0KmtWQXIpIiwgIjEtMDoyMS43LjAoMDAwMC4wNjQqa1cpIiwgIjEtMDoyMi43LjAoMDAwMC4wMDAqa1cpIiwgIjEtMDo0MS43LjAoMDAwMC4xNjEqa1cpIiwgIjEtMDo0Mi43LjAoMDAwMC4wMDAqa1cpIiwgIjEtMDo2MS43LjAoMDAwMC4wMjgqa1cpIiwgIjEtMDo2Mi43LjAoMDAwMC4wMDAqa1cpIiwgIjEtMDoyMy43LjAoMDAwMC4wMDAqa1ZBcikiLCAiMS0wOjI0LjcuMCgwMDAwLjAwMCprVkFyKSIsICIxLTA6NDMuNy4wKDAwMDAuMDAwKmtWQXIpIiwgIjEtMDo0NC43LjAoMDAwMC4wNTIqa1ZBcikiLCAiMS0wOjYzLjcuMCgwMDAwLjAwMCprVkFyKSIsICIxLTA6NjQuNy4wKDAwMDAuMDMyKmtWQXIpIiwgIjEtMDozMi43LjAoMjMzLjYqVikiLCAiMS0wOjUyLjcuMCgyMzMuMCpWKSIsICIxLTA6NzIuNy4wKDIzMi45KlYpIiwgIjEtMDozMS43LjAoMDAwLjIqQSkiLCAiMS0wOjUxLjcuMCgwMDAuNypBKSIsICIxLTA6NzEuNy4wKDAwMC4xKkEpIiwgIiEwRTc4Il0sICJjaGVja3N1bSI6ICIwRTc4In19.F_qZ21yRA3CPLhFYPojJ0mHA9NI5pdMOdQ5bdk35ENh3dkyA14S9UqILK8KhZVxeegfQSGjS5gHle3BKBm14cw\n")))}u.isMDXComponent=!0}}]);