"use strict";(self.webpackChunksrcful_documentation=self.webpackChunksrcful_documentation||[]).push([[2020],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var i=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),d=o,k=p["".concat(s,".").concat(d)]||p[d]||m[d]||r;return n?i.createElement(k,a(a({ref:t},u),{},{components:n})):i.createElement(k,a({ref:t},u))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:o,a[1]=l;for(var c=2;c<r;c++)a[c]=n[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6205:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var i=n(7462),o=(n(7294),n(3905));const r={},a="Modbus TCP Configuration - APsystems ECU",l={unversionedId:"energy-gateway/compatible-devices/apsystems",id:"energy-gateway/compatible-devices/apsystems",title:"Modbus TCP Configuration - APsystems ECU",description:"Communication Setup Overview",source:"@site/docs/energy-gateway/compatible-devices/apsystems.md",sourceDirName:"energy-gateway/compatible-devices",slug:"/energy-gateway/compatible-devices/apsystems",permalink:"/energy-gateway/compatible-devices/apsystems",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/energy-gateway/compatible-devices/"},next:{title:"Modbus TCP Configuration - Deye Inverter",permalink:"/energy-gateway/compatible-devices/deye"}},s={},c=[{value:"Communication Setup Overview",id:"communication-setup-overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configuration Process",id:"configuration-process",level:2},{value:"Initial Connection",id:"initial-connection",level:3},{value:"Modbus Configuration",id:"modbus-configuration",level:3},{value:"Bridge Setup",id:"bridge-setup",level:3},{value:"Important Notes",id:"important-notes",level:2},{value:"Testing Connectivity",id:"testing-connectivity",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Connection Issues",id:"connection-issues",level:3},{value:"Application Issues",id:"application-issues",level:3},{value:"Modbus Problems",id:"modbus-problems",level:3},{value:"Bridge Communication Issues",id:"bridge-communication-issues",level:3},{value:"Source",id:"source",level:2}],u={toc:c},p="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(p,(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"modbus-tcp-configuration---apsystems-ecu"},"Modbus TCP Configuration - APsystems ECU"),(0,o.kt)("h2",{id:"communication-setup-overview"},"Communication Setup Overview"),(0,o.kt)("p",null,"APsystems inverters use RS-485 communication via RJ45. To connect to a network, a bridge device is needed to convert RS-485 to Modbus TCP. The Waveshare RS485 to ETH converter (RS232/485 to ETH-B) can be used for this purpose and is available from ",(0,o.kt)("a",{parentName:"p",href:"https://www.waveshare.com/RS232-485-TO-ETH.htm"},"Waveshare")," directly."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Mobile device with ",(0,o.kt)("inlineCode",{parentName:"li"},"EMA Manager")," app installed from:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"App Store")," (iOS)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Play Store")," (Android)"))),(0,o.kt)("li",{parentName:"ul"},"Access to the ",(0,o.kt)("inlineCode",{parentName:"li"},"ECU")," device"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"WiFi")," connectivity"),(0,o.kt)("li",{parentName:"ul"},"Waveshare RS485 to ETH converter or equivalent RS-485 to TCP bridge"),(0,o.kt)("li",{parentName:"ul"},"RS-485 cable for connection between ECU and converter")),(0,o.kt)("h2",{id:"configuration-process"},"Configuration Process"),(0,o.kt)("h3",{id:"initial-connection"},"Initial Connection"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Press the ",(0,o.kt)("inlineCode",{parentName:"li"},"AP")," button on the ",(0,o.kt)("inlineCode",{parentName:"li"},"ECU")),(0,o.kt)("li",{parentName:"ol"},"Connect to WiFi network: ",(0,o.kt)("inlineCode",{parentName:"li"},"ECU_R_216xxxx")),(0,o.kt)("li",{parentName:"ol"},"Use password: ",(0,o.kt)("inlineCode",{parentName:"li"},"88888888"))),(0,o.kt)("h3",{id:"modbus-configuration"},"Modbus Configuration"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Launch ",(0,o.kt)("inlineCode",{parentName:"li"},"EMA Manager")),(0,o.kt)("li",{parentName:"ol"},"Navigate to: ",(0,o.kt)("inlineCode",{parentName:"li"},"Local Access")," \u2192 ",(0,o.kt)("inlineCode",{parentName:"li"},"Workspace")," \u2192 ",(0,o.kt)("inlineCode",{parentName:"li"},"Sunspec Configuration")),(0,o.kt)("li",{parentName:"ol"},"Enable ",(0,o.kt)("inlineCode",{parentName:"li"},"Modbus")," toggle"),(0,o.kt)("li",{parentName:"ol"},"Save changes and acknowledge any warnings")),(0,o.kt)("h3",{id:"bridge-setup"},"Bridge Setup"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Connect the RS-485 cable between your ECU's RS-485 port and the Waveshare converter"),(0,o.kt)("li",{parentName:"ol"},"Configure the converter's network settings according to your local network requirements"),(0,o.kt)("li",{parentName:"ol"},"Make note of the IP address assigned to the converter - you'll need this for testing and monitoring")),(0,o.kt)("h2",{id:"important-notes"},"Important Notes"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AP mode")," remains active for 1 hour"),(0,o.kt)("li",{parentName:"ul"},"Press ",(0,o.kt)("inlineCode",{parentName:"li"},"AP")," button again to extend configuration time"),(0,o.kt)("li",{parentName:"ul"},"Your specific inverter IDs will differ from documentation examples"),(0,o.kt)("li",{parentName:"ul"},"Ensure proper wiring between ECU and RS-485 converter"),(0,o.kt)("li",{parentName:"ul"},"Keep the converter in a dry, protected location")),(0,o.kt)("h2",{id:"testing-connectivity"},"Testing Connectivity"),(0,o.kt)("p",null,"After configuring both the ECU and the RS-485 to TCP bridge, you should verify that the connection is working properly. You can follow our ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/srcfl/egw-getting-started/blob/main/test_con.md"},"testing guide")," to confirm the connection. When testing APsystems ECU devices through the bridge, remember that the default Modbus port is 502, and the Unit ID is typically set to 1. You may need to wait a few minutes after configuration before the Modbus TCP connection becomes active. When testing, use the IP address of your RS-485 to TCP bridge, not the ECU's IP address."),(0,o.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("h3",{id:"connection-issues"},"Connection Issues"),(0,o.kt)("p",null,"If unable to connect to ",(0,o.kt)("inlineCode",{parentName:"p"},"ECU"),":"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Verify ",(0,o.kt)("inlineCode",{parentName:"li"},"AP mode")," is active"),(0,o.kt)("li",{parentName:"ol"},"Maintain close proximity to ",(0,o.kt)("inlineCode",{parentName:"li"},"ECU")," during setup"),(0,o.kt)("li",{parentName:"ol"},"Check WiFi password (eight 8s)")),(0,o.kt)("h3",{id:"application-issues"},"Application Issues"),(0,o.kt)("p",null,"If experiencing problems with the app:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Verify connection to ",(0,o.kt)("inlineCode",{parentName:"li"},"ECU")," network"),(0,o.kt)("li",{parentName:"ol"},"Restart ",(0,o.kt)("inlineCode",{parentName:"li"},"EMA Manager")),(0,o.kt)("li",{parentName:"ol"},"Update to latest version")),(0,o.kt)("h3",{id:"modbus-problems"},"Modbus Problems"),(0,o.kt)("p",null,"If Modbus is not functioning:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Confirm ",(0,o.kt)("inlineCode",{parentName:"li"},"Modbus")," toggle is enabled"),(0,o.kt)("li",{parentName:"ol"},"Verify inverter IDs are visible"),(0,o.kt)("li",{parentName:"ol"},"Check RS-485 cable connections"),(0,o.kt)("li",{parentName:"ol"},"Verify bridge device network settings"),(0,o.kt)("li",{parentName:"ol"},"Test connection with monitoring system")),(0,o.kt)("h3",{id:"bridge-communication-issues"},"Bridge Communication Issues"),(0,o.kt)("p",null,"If the RS-485 to TCP bridge isn't working:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Check power supply to the converter"),(0,o.kt)("li",{parentName:"ol"},"Verify RS-485 cable connections and polarity"),(0,o.kt)("li",{parentName:"ol"},"Confirm network settings on the converter"),(0,o.kt)("li",{parentName:"ol"},"Test network connectivity to the converter's IP address")),(0,o.kt)("h2",{id:"source"},"Source"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Community"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://global.apsystems.com/wp-content/uploads/2022/09/APsystems-Energy-Communication-Unit-ECU-R-User-Manual_Rev7.7_2022-08-30.pdf"},"APsystems ECU Modbus Settings"))))}m.isMDXComponent=!0}}]);